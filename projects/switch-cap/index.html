<!DOCTYPE html>
<html>
  <head>
    <title>Nathan Godwin - Switched-Capacitor Filter</title>
    <link href="../../css/style.css" type="text/css" rel="stylesheet">
    <link href="../../font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link rel="icon" href="../../favicon.png">
  </head>
  <body>
    <div>
        <ul id="navbar">
          <a href="../.."> <li class="nav-index">Nathan Godwin</li></a>
          <a href="../../resume"> <li class="nav-item">Resume</li></a>
          <a href=".."><li class="nav-item">Projects</li></a>
          <a href="../../about"><li class="nav-item">About Me</li></a>
          <a href="../../contact"><li class="nav-item">Contact</li></a>
        </ul>
    </div>
    <div class="project-window">
      <div class="p-25 box-a project-view">
        <div class="project-nav">
            <a href="..">
                <div class="project-item">
                    Contents
                </div>
            </a>
            <a href="../laser-cutter">
                <div class="project-item">
                    Laser Cutter
                </div>
            </a>
            <a href="../8-mult">
                <div class="project-item">
                    8-bit Multiplier
                </div>
            </a>
            <a href="../gpteam8">
                <div class="project-item">
                    Grand PrIEEE
                </div>
            </a>
            <a href="../delta-sigma-1">
                <div class="project-item">
                    Delta-Sigma Modulator
                </div>
            </a>
            <a href="../trn-micro">
                <div class="project-item">
                    Translational Microscope
                </div>
            </a>
            <a href="../qp">
                <div class="project-item">
                    Quarterly Projects
                </div>
            </a>
            <a href="../pol-mount">
                <div class="project-item">
                    Polaroid Mount
                </div>
            </a>
            <a href="../switch-cap">
                <div class="project-item">
                    Switched-Capacitor Filter
                </div>
            </a>
            <a href="../butterworth">
                <div class="project-item">
                    Butterworth Filter
                </div>
            </a>
            <a href="../wien-bridge">
                <div class="project-item">
                    Wien-Bridge Oscillator
                </div>
            </a>
            <a href="../nathanrgodwin">
                <div class="project-item">
                    nathanrgodwin.com
                </div>
            </a>
        </div>
      </div>
      <div class="box-b project-view">
        <div class="description-holder">
          <div class="description">
            <div class="description-main-title">
              <h1> 
                Switched-Capacitor Filter
              </h1>
            </div>
            <h3 class="description-title" style="margin: 0px 10px 0px 10px"> 
              A 4th-order, maximally flat, biquad, switched-capacitor bandpass filter. 
            </h3>
            <br>
            <div style="display: table; margin: 0 auto;">
              <a href="https://github.com/nathanrgodwin">
                <div class="project-resources">
                  <i class="fa fa-github fa-2x" aria-hidden="false"></i>
                  GITHUB
                </div>
              </a>
              <a href="laser-cutter.7z">
                <div class="project-resources">
                  <i class="fa fa-download fa-2x" aria-hidden="false"></i>
                  DOWNLOAD
                </div>
              </a>
            </div>
            <br>
            <hr style="border-style: solid; border-color: #F85A3E;
                      background-color: #F85A3E; color: #F85A3E;
                      width: 95%; margin-top: 0; padding: 0;">
            <h3 class="description-title"> 
              Concept and Background:
            </h3> 
            <p class="description-text"> 
              The concept behind this project was the design of a 4th order, maximally-flat, biquad, switched capacitor filter.
              To make the filter maximally-flat, the filter was modelled after a cascade of two biquad Butterworth transfer functions.
              The bandpass functionality is created by shifting the low-pass filter's frequency to the desired cutoff frequency.
            </p>
            <h3 class="description-title"> 
              Equivalent Circuit:
            </h3> 
            <img src="schematic.jpg" style="display: block; margin: auto; margin-bottom: 20px; width: 90%; min-width: 400px; max-width: 700px"/>
            <h3 class="description-title"> 
              Switched Capacitor Filter:
            </h3> 
            <p class="description-text"> 
              The switched capacitor filter functions as a discrete time filter for an analog input. By switching charge
              in and out of capacitors, the filter can be made to model a filter with continuous-time RC components. This works
              because the charge on the capacitor is q = CV and the charge is transferred at a rate of f, where f is the
              switching frequency, I = qf, the switched capacitor can be modelled as a resistor where R = V/I = (q/C)/(qf)
              = 1/(Cf). The advantage to a switched capacitor filter is that it can virtually eliminate the component 
              tolerances found in passive components, increasing the accuracy of the filter.
            </p>
            <h3 class="description-title"> 
              Maximally-flat Filter:
            </h3> 
            <p class="description-text"> 
              The derivation of the 2nd-order, low-pass Butterworth filter can be seen in the project description
              <a href="../butterworth">Butterworth Filter</a>.
            </p>
            <h3 class="description-title"> 
              Derivation of 4th-order, maximally-flat, bandpass filter:
            </h3> 
            <p class="description-text"> 
              Starting with the maximally-flat 2nd-order low-pass filter:
              <img src="lp_tf.png" style="display: block; margin: auto; margin-bottom: 20px; width: 40%; min-width: 250px; max-width: 250px"/>
              Transforming it with a LP-BP transformation s &rarr; Q(&omega;<sub>o</sub>/s + s/&omega;<sub>o</sub>) gives the
              4th-order band-pass transfer function:
              <img src="bp_tf.png" style="display: block; margin: auto; margin-bottom: 20px; width: 40%; min-width: 400px; max-width: 700px"/>
            </p>
            <h3 class="description-title"> 
              Conversion to biquad, switched-capacitor filters:
            </h3> 
            <p class="description-text"> 
              The 4th-order band-pass transfer function can be converted into a cascade of biquad transfer functions
              H<sub>1</sub>(s) and H<sub>2</sub>(s).
              <img src="biquad_tf.png" style="display: block; margin: auto; margin-bottom: 20px; width: 40%; min-width: 250px; max-width: 250px"/>
              For f<sub>o</sub> = 10kHz, Q = 10, and G = 6dB, we can determine the bandwidth to be BW = f<sub>o</sub>/Q
              = 1kHz and &omega;<sub>k</sub> to be BW/2 = (2&pi;)(500Hz). The properties of our biquad filters can be calculated as follows:
              <img src="biquad_prop.png" style="display: block; margin: auto; margin-bottom: 20px; width: 40%; min-width: 400px; max-width: 700px"/>
            </p>
            <h3 class="description-title"> 
              Simulated Bode Plot:
            </h3> 
            <p class="description-text"> 
              The equivalent circuit diagram was simulated in PSPICE and produced the following bodes plot:
              <img src="bode1.JPG" style="display: block; margin: auto; margin-bottom: 20px; width: 40%; min-width: 400px; max-width: 700px"/>
              <img src="bode2.JPG" style="display: block; margin: auto; margin-bottom: 20px; width: 40%; min-width: 400px; max-width: 700px"/>
            </p>
            <h3 class="description-title"> 
              Measurement:
            </h3> 
            <p class="description-text"> 
              The circuit was built with the MF10 switched capacitor active filter building block and produced the following result:
              <img src="measure.png" style="display: block; margin: auto; margin-bottom: 20px; width: 90%; min-width: 400px; max-width: 1000px"/>
              which shows the -3dB cut-off at 9.506kHz and 10.59kHz.
            </p>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>