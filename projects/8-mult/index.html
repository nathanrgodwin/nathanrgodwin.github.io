<!DOCTYPE html>
<html>
  <head>
    <title>Nathan Godwin - 8-bit Multiplier</title>
    <link href="../../css/style.css" type="text/css" rel="stylesheet">
    <link href="../../font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link rel="icon" href="../../favicon.png">
  </head>
  <body>
    <div>
        <ul id="navbar">
          <a href="../.."> <li class="nav-index">Nathan Godwin</li></a>
          <a href="../../resume"> <li class="nav-item">Resume</li></a>
          <a href=".."><li class="nav-item">Projects</li></a>
          <a href="../../about"><li class="nav-item">About Me</li></a>
          <a href="../../contact"><li class="nav-item">Contact</li></a>
        </ul>
    </div>
    <div class="project-window">
      <div class="p-25 box-a project-view">
        <div class="project-nav">
            <a href="..">
                <div class="project-item">
                    Contents
                </div>
            </a>
            <a href="../laser-cutter">
                <div class="project-item">
                    Laser Cutter
                </div>
            </a>
            <a href="../8-mult">
                <div class="project-item">
                    8-bit Multiplier
                </div>
            </a>
            <a href="../gpteam8">
                <div class="project-item">
                    GrandPrIEEE
                </div>
            </a>
            <a href="../delta-sigma-1">
                <div class="project-item">
                    Delta-Sigma Modulator
                </div>
            </a>
            <a href="../trn-micro">
                <div class="project-item">
                    Translational Microscope
                </div>
            </a>
            <a href="../qp">
                <div class="project-item">
                    Quarterly Projects
                </div>
            </a>
            <a href="../pol-mount">
                <div class="project-item">
                    Polaroid Mount
                </div>
            </a>
            <a href="../switch-cap">
                <div class="project-item">
                    Switched-Capacitor Filter
                </div>
            </a>
            <a href="../butterworth">
                <div class="project-item">
                    Butterworth Filter
                </div>
            </a>
            <a href="../wien-bridge">
                <div class="project-item">
                    Wien-Bridge Oscillator
                </div>
            </a>
        </div>
      </div>
      <div class="box-b project-view">
        <div class="description-holder">
          <div class="description">
            <div class="description-main-title">
              <h1> 
                8-Bit Multiplier
              </h1>
            </div>
            <h3 class="description-title" style="margin: 0"> 
              An 8-bit, booth-encoded, signed multiplier written using logic gates in
                    SystemVerilog with netlist and layout. 
            </h3>
            <br>
            <div style="display: table; margin: 0 auto;">
              <a href="https://github.com/nathanrgodwin">
                <div class="project-resources">
                  <i class="fa fa-github fa-2x" aria-hidden="false"></i>
                  GITHUB
                </div>
              </a>
              <a href="8bit_mult.7z">
                <div class="project-resources">
                  <i class="fa fa-download fa-2x" aria-hidden="false"></i>
                  DOWNLOAD
                </div>
              </a>
            </div>
            <br>
            <hr style="border-style: solid; border-color: #F85A3E;
                      background-color: #F85A3E; color: #F85A3E;
                      width: 95%; margin-top: 0; padding: 0;">
            <h3 class="description-title"> 
              Concept:
            </h3> 
            <p class="description-text"> 
              The goal of this project was to design a parameter-based, 2-input, 8-bit multiplier integrated circuit
              using SystemVerilog primitives and assignments and to create a gate-level netlist and layout with
              Synopsys Design Vision and Cadence Innovus. The multiplier is structured as a signed, modified booth-encoded multiplier with two 8-bit inputs. 
              Signed values are handled with sign extension of the partial products generated by the booth algorithms.
            </p>
            <h3 class="description-title"> 
              Modified Booth-Encoding:
            </h3> 
            <p class="description-text"> 
              The modified booth-encoding considers the multiplier in blocks of three bits and generates (N+1)/2 partial products
              according to the following scheme for the inputs X and Y:
            </p>
              <table style="text-align:center; display: table; margin: auto; margin-bottom: 20px">
                <tr>
                  <td>
                    [X<sub>2i+1</sub>, X<sub>2i</sub>, X<sub>2i-1</sub>]
                  </td>
                  <td>
                    Partial Product
                  </td>
                </tr>
                <tr>
                  <td>
                    [0, 0, 0]
                  </td>
                  <td>
                    0
                  </td>
                </tr>
                <tr>
                  <td>
                    [0, 0, 1]
                  </td>
                  <td>
                    Y
                  </td>
                </tr>
                <tr>
                  <td>
                    [0, 1, 0]
                  </td>
                  <td>
                    Y
                  </td>
                </tr>
                <tr>
                  <td>
                    [0, 1, 1]
                  </td>
                  <td>
                    2Y
                  </td>
                </tr>
                <tr>
                  <td>
                    [1, 0, 0]
                  </td>
                  <td>
                    -2Y
                  </td>
                </tr>
                <tr>
                  <td>
                    [1, 0, 1]
                  </td>
                  <td>
                    -Y
                  </td>
                </tr>
                <tr>
                  <td>
                    [1, 1, 0]
                  </td>
                  <td>
                    -Y
                  </td>
                </tr>
                <tr>
                  <td>
                    [1, 1, 1]
                  </td>
                  <td>
                    0
                  </td>
                </tr>
              </table>
            <p class="description-text">
              These partial products can then be sign extended and added together. This provides
              a reduction in necessary additions from N to (N+1)/2 at the minimal expense of the
              booth logic.
            </p>
            <h3 class="description-title"> 
              Addition of Partial Products:
            </h3> 
            <p class="description-text"> 
              The partial products are added together with an array of (N/2 x 2N)-bit Carry Save Adders (CSA). Using CSAs
              is advantageous because it allows the easy addition of three or more N-bit values. This is accomplished
              by treating the carry-in as an additional input to the full adder. The carry-out and the sum at
              the end of the CSA array are added together to produce the final value. In this case,
              we have 4 partial products which can be easily added together with a CSA array which are added
              together by two rows of 16-bit CSAs.
            </p>
            <h3 class="description-title"> 
              Final Array Addition:
            </h3> 
            <p class="description-text"> 
              The output of the CSA array is two (2*N)-bit numbers, carry-out and sum; to add these together, a 16-bit carry lookahead
              adder is used. The group propagate-generate logic provides a significant advantage over a ripple-carry adder
              which must wait for the carry-propagation of each full adder in order to calculate the sum. The adder logic
              was also modified to use NAND and NOT gates in order to reduce the amount of transistors necessary.
            </p>
            <h3 class="description-title"> 
              Testing the Code:
            </h3> 
            <p class="description-text"> 
              Registered inputs and outputs, as well as a reset, were added. The code was then tested with a testbench producing the result below:
            </p>
            <img src="testbench.jpg" style="display: block; margin: auto; margin-bottom: 20px; width: 90%; min-width: 400px"/>
            <p class="description-text">
              The testbench shows that the multiplier produces the correct output one clock cycle after the inputs are registered.
            </p>
            <h3 class="description-title"> 
              Creating the Netlist:
            </h3> 
            <p class="description-text"> 
              The SystemVerilog design was converted into a netlist using Synopsys Design Vision using FreePDK45 standard
              cells. The critical path and slack of the system can be examined using the Timing Analysis Driver tool. The
              results of the tool show that the critical path is from input X, register 0, to output product, register 15;
              this path has a slack of 8.2ns. The critical path is shown on the unpacked gate-level schematic below:
            </p>
            <img src="critical_path.jpg" style="display: block; margin: auto; margin-bottom: 20px; width: 90%; min-width: 400px; max-width: 700px"/>
            <h3 class="description-title"> 
              Layout:
            </h3> 
            <p class="description-text"> 
              Using the netlist from Synopsys Design Vision, a floorplan was arranged in Cadence Innovus with 60% core
              utilization and inputs arranged along the top and bottom of the chip. Power rings and rails were added and
              the core was populated and routed with the standard cells from the FreePDK45 library. At this point, the
              worst slack time reported by Innovus was 7.627ns for operation at 100MHz. The clock tree was added and the routing was optimized,
              resulting in the layout shown below, with the clock tree highlighted in white:
            </p>
            <img src="post_clock_layout.png" style="display: block; margin: auto; margin-bottom: 20px; width: 80%; min-width: 400px; max-width: 700px"/>
            <p class="description-text">
              Filler cells were added and the routing was modified to accommodate the new cells. Finally, in place optimization
              was performed, resulting in a slack of 3.759ns. This means that the multiplier can run at 
              a rate of f<sub>max</sub> = 1/(T-t<sub>slack</sub>) = 1/(10ns - 3.759ns) = 160.2MHz.
              The Final Post-Route Post-IPO Layout is shown below:
            </p>
            <img src="final_layout.png" style="display: block; margin: auto; margin-bottom: 20px; width: 80%; min-width: 400px; max-width: 700px"/>
            <p class="description-text">
              The final layout was confirmed by simulating the Verilog netlist generated by Innovus. Running
              the verifyConnection and verifyGeometry functions confirmed that the place and route produced performed
              correctly.
            </p> 
            <h3 class="description-title"> 
              Final Layout Data:
            </h3> 
            <p class="description-text"> 
              The final design had the following characteristics:
            </p>
            <table style="text-align:center; display: table; margin: auto; margin-bottom: 20px">
              <tr>
                <td>
                  Maximum frequency
                </td>
                <td>
                  160.2 MHz
                </td>
              </tr>
              <tr>
                <td>
                  VDD
                </td>
                <td>
                  1.1V
                </td>
              </tr>
              <tr>
                <td>
                  Power Consumption
                </td>
                <td>
                  0.32983mW
                </td>
              </tr>
              <tr>
                <td>
                  Energy per operation
                </td>
                <td>
                  2.0589pW
                </td>
              </tr>
              <tr>
                <td>
                  Core area
                </td>
                <td>
                  900um<sup>2</sup>
                </td>
              </tr>
              <tr>
                <td>
                  Cell area
                </td>
                <td>
                  1315.45um<sup>2</sup>
                </td>
              </tr>
            </table>
            <h3 class="description-title"> 
              Design Modifications:
            </h3> 
            <p class="description-text"> 
              Further modifications were made to the SystemVerilog design. One such modification is the
              parametrization of the SystemVerilog modules to allow the design to multiply two N-bit inputs.
              The parameters used allow the top level module to assign an input width parameter for all submodules.
              Additionally, modifications were made to the adder array to reduce the number of adders on the LSBs
              of the partial products; this change is possible because all but one of the LSBs of the partial products
              per column are zero, so the LSBs of the partial products can be directly assigned to the output registers.
              These changes can be seen in the N-bit multiplier SystemVerilog files. Netlist and layout were not performed
              for the modified design because access was lost to the Synopsys and Cadence software.
            </p>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>